language: go

go:
- "1.17.6"

git:
  depth: 1

notifications:
  email: false

before_install:
- bash -c "[ \"$COVERALLS_TOKEN\" != \"-\" ] && go install github.com/mattn/goveralls@v0.0.11"

script:
- "make lint"
- "make test"
- bash -c "[ \"$COVERALLS_TOKEN\" != \"-\" ] && $GOPATH/bin/goveralls -service=travis-ci -repotoken $COVERALLS_TOKEN"
